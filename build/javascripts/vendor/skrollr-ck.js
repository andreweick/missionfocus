(function(g,r,D){function k(a){x=r.documentElement;H=r.body;ha();l=this;a=a||{};S=a.constants||{};if(a.easing)for(var b in a.easing)K[b]=a.easing[b];z={beforerender:a.beforerender,render:a.render};L=!1!==a.forceHeight;T=!1!==a.smoothScrolling;A={targetTop:l.getScrollTop()};L&&(U=a.scale||1);E(x,[V],[ia]);if(L){a=r.getElementById("skrollr-body")||r.createElement("div");var c=a.style;c.minWidth="1px";c.position="absolute";c.top=c.zIndex="0";a.id||(c.width="1px",c.right="0",H.appendChild(a));M=function(){B=
0;W();c.height=B+x.clientHeight+"px";n.iscroll&&g.setTimeout(function(){n.iscroll.refresh()},0)}}else M=function(){B=H.scrollHeight-x.clientHeight;W();O=!0;n.iscroll&&g.setTimeout(function(){n.iscroll.refresh()},0)};l.refresh();ja("resize",M);(function d(){I(d);var a=l.getScrollTop(),b,c=N();e?(c>=e.endTime?(a=e.targetTop,b=e.done,e=D):(a=e.easing((c-e.startTime)/e.duration),a=e.startTop+a*e.topDiff|0),l.setScrollTop(a)):(A.targetTop-a&&(A={startTop:F,topDiff:a-F,targetTop:a,startTime:P,endTime:P+
X}),c<=A.endTime&&(a=K.sqrt((c-A.startTime)/X),a=A.startTop+a*A.topDiff|0));0>a&&(a=0);if(O||F!==a){Y=a>=F?"down":"up";O=!1;var h={curTop:a,lastTop:F,maxTop:B,direction:Y};if(!1!==(z.beforerender&&z.beforerender.call(l,h))){for(var g=a,m=l.getScrollTop(),k=0;k<t.length;k++){var v=t[k],C=v.smoothScrolling?g:m,p=v.keyFrames,y=p[0].frame,q=p[p.length-1].frame,s=C<=y,r=C>=q,w;if(s||r){p=p[s?0:p.length-1].props;for(w in p)Q.call(p,w)&&(s=Z(p[w].value),n.setStyle(v.element,w,s));if(v.___has_rendered_class&&
(C<y||C>q))E(v.element,[R],["rendered"]),v.___has_rendered_class=!1}else{v.___has_rendered_class||(E(v.element,["rendered"],[R]),v.___has_rendered_class=!0);for(q=0;q<p.length-1;q++)if(C>=p[q].frame&&C<=p[q+1].frame){y=p[q];p=p[q+1];for(w in y.props)if(Q.call(y.props,w)){r=(C-y.frame)/(p.frame-y.frame);r=y.props[w].easing(r);q=y.props[w].value;s=p.props[w].value;if(q.length!==s.length)throw"Can't interpolate between \""+q[0]+'" and "'+s[0]+'"';for(var x=[q[0]],G=1;G<q.length;G++)x[G]=q[G]+(s[G]-q[G])*
r;s=x;s=Z(s);n.setStyle(v.element,w,s)}break}}}F=a;z.render&&z.render.call(l,h)}b&&b.call(l,!1)}P=c})();return l}var n=g.skrollr={get:function(){return l},init:function(a){return l||new k(a)},VERSION:"0.5.10"},Q=Object.prototype.hasOwnProperty,x,H,R="unrendered",V="skrollr",ia="no-"+V,X=200,I=g.requestAnimationFrame;(function(){var a=["ms","moz","webkit","o"],b;for(b=0;b<a.length&&!I;b++)I=g[a[b]+"RequestAnimationFrame"];var c=0;I||(I=function(a){var b=N(),u=Math.max(0,30-(b-c));g.setTimeout(function(){a(b+
u)},u);c=b+u})})();var ka=/^\s*(.+)\s*$/m,la=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,ma=/\s*([a-z\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,na=/^([a-z\-]+)\[(\w+)\]$/,oa=/-([a-z])/g,pa=function(a,b){return b.toUpperCase()},$=/[\-+]?[\d]*\.?[\d]+/g,aa=/\{\?\}/g,ba=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,ca=/[a-z\-]+-gradient/g,J,da,ha=function(){var a=/^(?:O|Moz|webkit|ms)/;if(g.getComputedStyle){var b=g.getComputedStyle(H,null),c;for(c in b)if(J=
c.match(a)||+c==c&&b[c].match(a))break}J=(J||[""])[0];da="-"+J.toLowerCase()+"-"},K={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5},sqrt:function(a){return Math.sqrt(a)},bounce:function(a){var b;if(0.5083>=a)b=3;else if(0.8489>=a)b=9;else if(0.96208>=a)b=27;else{if(!(0.99981>=a))return 1;b=91}return 1-Math.abs(3*Math.cos(1.028*a*b)/b)}};k.prototype.refresh=
function(a){var b,c=!1;a===D?(c=!0,t=[],ea=0,a=r.getElementsByTagName("*")):a=[].concat(a);for(b=0;b<a.length;b++){var f=a[b],d=f,u=[],e=T;if(f.attributes){for(var g=0;g<f.attributes.length;g++){var h=f.attributes[g];if("data-anchor-target"===h.name){if(d=r.querySelector(h.value),null===d)throw'Unable to find anchor target "'+h.value+'"';}else if("data-smooth-scrolling"===h.name)e="off"!==h.value;else{var k=h.name.match(la);if(null!==k){var m=k[1],m=m&&S[m.substr(1)]||0,m=(k[2]|0)+m,n=k[3],k=k[4]||
n,h={offset:m,props:h.value,element:f};u.push(h);!n||"start"===n||"end"===n?(h.mode="absolute","end"===n?h.isEnd=!0:(h.frame=m*U,delete h.offset)):(h.mode="relative",h.anchors=[n,k])}}}u.length&&(!c&&"___skrollable_id"in f?(m=f.___skrollable_id,g=t[m].styleAttr,h=t[m].classAttr):(m=f.___skrollable_id=ea++,g=f.style.cssText,h=fa(f)),d=t[m]={element:f,styleAttr:g,classAttr:h,anchorTarget:d,keyFrames:u,smoothScrolling:e},E(f,["skrollable","rendered"],[R]),d.___has_rendered_class=!0)}}M();for(b=0;b<a.length;b++)if(c=
t[a[b].___skrollable_id],c!==D){c.keyFrames.sort(qa);f=c;for(d=0;d<f.keyFrames.length;d++){u=f.keyFrames[d];for(g={};null!==(h=ma.exec(u.props));)e=h[1],m=h[2],h=e.match(na),null!==h?(e=h[1],h=h[2]):h="linear",m=m.indexOf("!")?ra(m):[m.slice(1)],g[e]={value:m,easing:K[h]};u.props=g}f={};d=void 0;for(d=0;d<c.keyFrames.length;d++)ga(c.keyFrames[d],f);f={};for(d=c.keyFrames.length-1;0<=d;d--)ga(c.keyFrames[d],f)}return l};k.prototype.relativeToAbsolute=function(a,b,c){var f=x.clientHeight,d=a.getBoundingClientRect();
a=d.top;d=d.bottom-d.top;"bottom"===b?a-=f:"center"===b&&(a-=f/2);"bottom"===c?a+=d:"center"===c&&(a+=d/2);a+=l.getScrollTop();return a+0.5|0};k.prototype.animateTo=function(a,b){b=b||{};var c=N(),f=l.getScrollTop();e={startTop:f,topDiff:a-f,targetTop:a,duration:b.duration||1E3,startTime:c,endTime:c+(b.duration||1E3),easing:K[b.easing||"linear"],done:b.done};e.topDiff||(e.done&&e.done.call(l,!1),e=D);return l};k.prototype.stopAnimateTo=function(){e&&e.done&&e.done.call(l,!0);e=D};k.prototype.isAnimatingTo=
function(){return!!e};k.prototype.setScrollTop=function(a){n.iscroll?n.iscroll.scrollTo(0,-a):g.scrollTo(0,a);return l};k.prototype.getScrollTop=function(){return n.iscroll?-n.iscroll.y:g.pageYOffset||x.scrollTop||H.scrollTop||0};k.prototype.on=function(a,b){z[a]=b;return l};k.prototype.off=function(a){delete z[a];return l};var W=function(){var a,b,c,f,d,g,e,k,h;for(g=0;g<t.length;g++){a=t[g];b=a.element;c=a.anchorTarget;f=a.keyFrames;for(e=0;e<f.length;e++)d=f[e],"relative"===d.mode&&(k=b.style.cssText,
h=fa(b),b.style.cssText=a.styleAttr,E(b,a.classAttr),d.frame=l.relativeToAbsolute(c,d.anchors[0],d.anchors[1])-d.offset,b.style.cssText=k,E(b,h)),L&&!d.isEnd&&d.frame>B&&(B=d.frame)}for(g=0;g<t.length;g++){a=t[g];f=a.keyFrames;for(e=0;e<f.length;e++)d=f[e],d.isEnd&&(d.frame=B-d.offset)}},ra=function(a){var b=[];ba.lastIndex=0;a=a.replace(ba,function(a){return a.replace($,function(a){return 100*(a/255)+"%"})});ca.lastIndex=0;a=a.replace(ca,function(a){return da+a});a=a.replace($,function(a){b.push(+a);
return"{?}"});b.unshift(a);return b},ga=function(a,b){for(var c in b)Q.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},Z=function(a){var b=1;aa.lastIndex=0;return a[0].replace(aa,function(){return a[b++]})};n.setStyle=function(a,b,c){a=a.style;b=b.replace(oa,pa).replace("-","");if("zIndex"===b)a[b]=""+(c|0);else if("float"===b)a.styleFloat=a.cssFloat=c;else try{a[J+b.slice(0,1).toUpperCase()+b.slice(1)]=c,a[b]=c}catch(f){}};var ja=function(a,b){g.addEventListener?g.addEventListener(a,
b,!1):g.attachEvent("on"+a,b)},fa=function(a){var b="className";g.SVGElement&&a instanceof g.SVGElement&&(a=a[b],b="baseVal");return a[b]},E=function(a,b,c){var f="className";g.SVGElement&&a instanceof g.SVGElement&&(a=a[f],f="baseVal");if(c===D)a[f]=b;else{for(var d=a[f],e=0;e<b.length;e++)-1===(" "+d+" ").indexOf(" "+b[e]+" ")&&(d+=" "+b[e]);for(b=0;b<c.length;b++)d=(" "+d+" ").replace(" "+c[b]+" "," ");a[f]=d.replace(ka,"$1")}},N=Date.now||function(){return+new Date},qa=function(a,b){return a.frame-
b.frame},l,t,z,L,B=0,M,U=1,S,Y="down",F=-1,P=N(),e,T,A,O,ea=0})(window,document);
