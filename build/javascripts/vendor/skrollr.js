(function(g,r,C){var N,O,P,Q,R;function k(a){x=r.documentElement;G=r.body;la();l=this;a=a||{};W=a.constants||{};if(a.easing)for(var b in a.easing)J[b]=a.easing[b];z={beforerender:a.beforerender,render:a.render};K=!1!==a.forceHeight;X=!1!==a.smoothScrolling;N=l.getScrollTop();R=Q=P=O=void 0;K&&(Y=a.scale||1);D(x,[Z],[ma]);if(K){a=r.getElementById("skrollr-body")||r.createElement("div");var c=a.style;c.minWidth="1px";c.position="absolute";c.top=c.zIndex="0";a.id||(c.width="1px",c.right="0",G.appendChild(a));
L=function(){A=0;$();c.height=A+x.clientHeight+"px";n.iscroll&&g.setTimeout(function(){n.iscroll.refresh()},0)}}else L=function(){A=G.scrollHeight-x.clientHeight;$();S=!0;n.iscroll&&g.setTimeout(function(){n.iscroll.refresh()},0)};l.refresh();na("resize",L);(function d(){H(d);var a=l.getScrollTop(),b,c=M();e?(c>=e.endTime?(a=e.targetTop,b=e.done,e=C):(a=e.easing((c-e.startTime)/e.duration),a=e.startTop+a*e.topDiff|0),l.setScrollTop(a)):(N-a&&(O=E,P=a-E,N=a,Q=T,R=T+aa),c<=R&&(a=J.sqrt((c-Q)/aa),a=
O+a*P|0));0>a&&(a=0);if(S||E!==a){ba=a>=E?"down":"up";S=!1;var h={curTop:a,lastTop:E,maxTop:A,direction:ba};if(!1!==(z.beforerender&&z.beforerender.call(l,h))){for(var g=a,m=l.getScrollTop(),k=0;k<t.length;k++){var v=t[k],B=v.smoothScrolling?g:m,p=v.keyFrames,y=p[0].frame,q=p[p.length-1].frame,s=B<=y,r=B>=q,w;if(s||r){p=p[s?0:p.length-1].props;for(w in p)U.call(p,w)&&(s=ca(p[w].value),n.setStyle(v.element,w,s));if(v.___has_rendered_class&&(B<y||B>q))D(v.element,[V],["rendered"]),v.___has_rendered_class=
!1}else{v.___has_rendered_class||(D(v.element,["rendered"],[V]),v.___has_rendered_class=!0);for(q=0;q<p.length-1;q++)if(B>=p[q].frame&&B<=p[q+1].frame){y=p[q];p=p[q+1];for(w in y.props)if(U.call(y.props,w)){r=(B-y.frame)/(p.frame-y.frame);r=y.props[w].easing(r);q=y.props[w].value;s=p.props[w].value;if(q.length!==s.length)throw"Can't interpolate between \""+q[0]+'" and "'+s[0]+'"';for(var x=[q[0]],F=1;F<q.length;F++)x[F]=q[F]+(s[F]-q[F])*r;s=x;s=ca(s);n.setStyle(v.element,w,s)}break}}}E=a;z.render&&
z.render.call(l,h)}b&&b.call(l,!1)}T=c})();return l}var n=g.skrollr={get:function(){return l},init:function(a){return l||new k(a)},VERSION:"0.5.10"},U=Object.prototype.hasOwnProperty,x,G,V="unrendered",Z="skrollr",ma="no-"+Z,aa=200,H=g.requestAnimationFrame;(function(){var a=["ms","moz","webkit","o"],b;for(b=0;b<a.length&&!H;b++)H=g[a[b]+"RequestAnimationFrame"];var c=0;H||(H=function(a){var b=M(),u=Math.max(0,30-(b-c));g.setTimeout(function(){a(b+u)},u);c=b+u})})();var oa=/^\s*(.+)\s*$/m,pa=/^data(?:-(_\w+))?(?:-?(-?\d+))?(?:-?(start|end|top|center|bottom))?(?:-?(top|center|bottom))?$/,
qa=/\s*([a-z\-\[\]]+)\s*:\s*(.+?)\s*(?:;|$)/gi,ra=/^([a-z\-]+)\[(\w+)\]$/,sa=/-([a-z])/g,ta=function(a,b){return b.toUpperCase()},da=/[\-+]?[\d]*\.?[\d]+/g,ea=/\{\?\}/g,fa=/rgba?\(\s*-?\d+\s*,\s*-?\d+\s*,\s*-?\d+/g,ga=/[a-z\-]+-gradient/g,I,ha,la=function(){var a=/^(?:O|Moz|webkit|ms)/;if(g.getComputedStyle){var b=g.getComputedStyle(G,null),c;for(c in b)if(I=c.match(a)||+c==c&&b[c].match(a))break}I=(I||[""])[0];ha="-"+I.toLowerCase()+"-"},J={begin:function(){return 0},end:function(){return 1},linear:function(a){return a},
quadratic:function(a){return a*a},cubic:function(a){return a*a*a},swing:function(a){return-Math.cos(a*Math.PI)/2+0.5},sqrt:function(a){return Math.sqrt(a)},bounce:function(a){var b;if(0.5083>=a)b=3;else if(0.8489>=a)b=9;else if(0.96208>=a)b=27;else if(0.99981>=a)b=91;else return 1;return 1-Math.abs(3*Math.cos(1.028*a*b)/b)}};k.prototype.refresh=function(a){var b,c=!1;a===C?(c=!0,t=[],ia=0,a=r.getElementsByTagName("*")):a=[].concat(a);for(b=0;b<a.length;b++){var f=a[b],d=f,u=[],e=X;if(f.attributes){for(var g=
0;g<f.attributes.length;g++){var h=f.attributes[g];if("data-anchor-target"===h.name){if(d=r.querySelector(h.value),null===d)throw'Unable to find anchor target "'+h.value+'"';}else if("data-smooth-scrolling"===h.name)e="off"!==h.value;else{var k=h.name.match(pa);if(null!==k){var m=k[1],m=m&&W[m.substr(1)]||0,m=(k[2]|0)+m,n=k[3],k=k[4]||n,h={offset:m,props:h.value,element:f};u.push(h);!n||"start"===n||"end"===n?(h.mode="absolute","end"===n?h.isEnd=!0:(h.frame=m*Y,delete h.offset)):(h.mode="relative",
h.anchors=[n,k])}}}u.length&&(!c&&"___skrollable_id"in f?(m=f.___skrollable_id,g=t[m].styleAttr,h=t[m].classAttr):(m=f.___skrollable_id=ia++,g=f.style.cssText,h=ja(f)),d=t[m]={element:f,styleAttr:g,classAttr:h,anchorTarget:d,keyFrames:u,smoothScrolling:e},D(f,["skrollable","rendered"],[V]),d.___has_rendered_class=!0)}}L();for(b=0;b<a.length;b++)if(c=t[a[b].___skrollable_id],c!==C){c.keyFrames.sort(ua);f=c;for(d=0;d<f.keyFrames.length;d++){u=f.keyFrames[d];for(g={};null!==(h=qa.exec(u.props));)e=h[1],
m=h[2],h=e.match(ra),null!==h?(e=h[1],h=h[2]):h="linear",m=m.indexOf("!")?va(m):[m.slice(1)],g[e]={value:m,easing:J[h]};u.props=g}f={};d=void 0;for(d=0;d<c.keyFrames.length;d++)ka(c.keyFrames[d],f);f={};for(d=c.keyFrames.length-1;0<=d;d--)ka(c.keyFrames[d],f)}return l};k.prototype.relativeToAbsolute=function(a,b,c){var f=x.clientHeight,d=a.getBoundingClientRect();a=d.top;d=d.bottom-d.top;"bottom"===b?a-=f:"center"===b&&(a-=f/2);"bottom"===c?a+=d:"center"===c&&(a+=d/2);a+=l.getScrollTop();return a+
0.5|0};k.prototype.animateTo=function(a,b){b=b||{};var c=M(),f=l.getScrollTop();e={startTop:f,topDiff:a-f,targetTop:a,duration:b.duration||1E3,startTime:c,endTime:c+(b.duration||1E3),easing:J[b.easing||"linear"],done:b.done};e.topDiff||(e.done&&e.done.call(l,!1),e=C);return l};k.prototype.stopAnimateTo=function(){e&&e.done&&e.done.call(l,!0);e=C};k.prototype.isAnimatingTo=function(){return!!e};k.prototype.setScrollTop=function(a){n.iscroll?n.iscroll.scrollTo(0,-a):g.scrollTo(0,a);return l};k.prototype.getScrollTop=
function(){return n.iscroll?-n.iscroll.y:g.pageYOffset||x.scrollTop||G.scrollTop||0};k.prototype.on=function(a,b){z[a]=b;return l};k.prototype.off=function(a){delete z[a];return l};var $=function(){var a,b,c,f,d,g,e,k,h;for(g=0;g<t.length;g++){a=t[g];b=a.element;c=a.anchorTarget;f=a.keyFrames;for(e=0;e<f.length;e++)d=f[e],"relative"===d.mode&&(k=b.style.cssText,h=ja(b),b.style.cssText=a.styleAttr,D(b,a.classAttr),d.frame=l.relativeToAbsolute(c,d.anchors[0],d.anchors[1])-d.offset,b.style.cssText=k,
D(b,h)),K&&(!d.isEnd&&d.frame>A)&&(A=d.frame)}for(g=0;g<t.length;g++){a=t[g];f=a.keyFrames;for(e=0;e<f.length;e++)d=f[e],d.isEnd&&(d.frame=A-d.offset)}},va=function(a){var b=[];fa.lastIndex=0;a=a.replace(fa,function(a){return a.replace(da,function(a){return 100*(a/255)+"%"})});ga.lastIndex=0;a=a.replace(ga,function(a){return ha+a});a=a.replace(da,function(a){b.push(+a);return"{?}"});b.unshift(a);return b},ka=function(a,b){for(var c in b)U.call(a.props,c)||(a.props[c]=b[c]);for(c in a.props)b[c]=a.props[c]},
ca=function(a){var b=1;ea.lastIndex=0;return a[0].replace(ea,function(){return a[b++]})};n.setStyle=function(a,b,c){a=a.style;b=b.replace(sa,ta).replace("-","");if("zIndex"===b)a[b]=""+(c|0);else if("float"===b)a.styleFloat=a.cssFloat=c;else try{a[I+b.slice(0,1).toUpperCase()+b.slice(1)]=c,a[b]=c}catch(f){}};var na=function(a,b){g.addEventListener?g.addEventListener(a,b,!1):g.attachEvent("on"+a,b)},ja=function(a){var b="className";g.SVGElement&&a instanceof g.SVGElement&&(a=a[b],b="baseVal");return a[b]},
D=function(a,b,c){var f="className";g.SVGElement&&a instanceof g.SVGElement&&(a=a[f],f="baseVal");if(c===C)a[f]=b;else{for(var d=a[f],e=0;e<b.length;e++)-1===(" "+d+" ").indexOf(" "+b[e]+" ")&&(d+=" "+b[e]);for(b=0;b<c.length;b++)d=(" "+d+" ").replace(" "+c[b]+" "," ");a[f]=d.replace(oa,"$1")}},M=Date.now||function(){return+new Date},ua=function(a,b){return a.frame-b.frame},l,t,z,K,A=0,L,Y=1,W,ba="down",E=-1,T=M(),e,X,S,ia=0})(window,document);
